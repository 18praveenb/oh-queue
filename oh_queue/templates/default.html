{% import "macros.html" as macros with context %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="description" content="CS 61A Queue">
    <meta name="keywords" content ="CS61A, Computer Science, CS, 61A, Office Hours, Project, Homework, Party, Parties, Queue" />
    <meta name="author" content="CS 61A Course Staff">
    <meta name="viewport" content="width=device-width">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.11.0/css/bootstrap-select.min.css">

    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/mono-blue.css') }}">
    <!-- App-specific CSS -->
    {{ macros.css_asset('style.css') }}
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/queue.css') }}">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/offline-js/0.7.17/themes/offline-theme-default.css">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/offline-js/0.7.17/themes/offline-language-english.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css" rel="stylesheet">

    <link rel="icon" href="{{ url_for('static', filename='img/favicon.ico') }}">

    <script>
      {% if current_user and current_user.is_authenticated %}
      var current_user_id = {{ current_user.id }};
      Raven.setUserContext({
          email:  '{{ current_user.email }}',
          id: {{ current_user.id }}
      })
      {% else %}
      var current_user_id = null;
      {% endif %}

      {% if current_user.is_staff %}
      var is_staff = true;
      {% else %}
      var is_staff = false;
      {% endif %}
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.4.8/socket.io.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.11.0/js/bootstrap-select.min.js"></script>

    <!-- Should be loaded before common.js -->
    <script src="https://cdn.ravenjs.com/3.3.0/raven.min.js"></script>
    <script>Raven.config('https://b295358cb42a4151bb615c6731e92ca6@sentry.cs61a.org/15').install() </script>
    <!-- App-specific JS -->
    {{  macros.js_asset('common.js') }}

    <title>CS 61A Queue</title>
    {% if current_user.is_authenticated %}
    <style>
      {% if current_user.is_staff %}
      .staff-only {
        display: block !important;
      }
      .student-only {
        display: none !important;
      }
      .staff-link:hover {
        background: #eee;
        transition: background 0.2s;
        cursor: pointer;
      }
      {% else %}
      .staff-only {
        display: none !important;
      }
      .student-only {
        display: block !important;
      }
      .staff-link {
        color: #333;
        pointer-events: none;
      }
      {% endif %}
      .hidden, .user-{{ current_user.id }}-hidden {
        display: none !important;
      }
      .user-{{ current_user.id }}-visible {
        display: block !important;
      }
      .user-{{ current_user.id }}-highlight {
        color: #31708f;
        background-color: #d9edf7;
        border: 1px solid #bce8f1;
        border-radius: 4px;
        font-weight: bold;
      }
      .user-{{ current_user.id }}-link {
        color: #31708f;
        pointer-events: auto;
      }
    </style>
    {% endif %}
  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-section">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/"><strong>CS 61A</strong> Queue</a>
        </div>
        <div class="collapse navbar-collapse" id="navbar-collapse-section">
          <ul class="nav navbar-nav navbar-right">
            {% if my_ticket %}
            <li><a href="{{ url_for('ticket', ticket_id=my_ticket.id) }}">My Request</a></li>
            {% endif %}
            {% if current_user.is_authenticated %}
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button">{{ current_user.name }} <span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="{{ url_for('auth.logout') }}">Log out</a></li>
              </ul>
            </li>
            {% else %}
              <li><a href="{{ url_for('auth.login') }}">Staff Login</a></li>
            {% endif %}
          </ul>
        </div>
      </div>
    </nav>
    {% block header %}{% endblock %}
    <div class="container">
      {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
      <div class="row">
        {% for category, message in messages %}
        <div class="col-xs-12">
          <div class="alert alert-{{ category }} alert-dismissible" role="alert">
            <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            {{ message }}
          </div>
        </div>
        {% endfor %}
<<<<<<< 70ea0c01fd8796fb255e0b282c63a5e2c532f8c5
      </div>
      {% endif %}
      {% endwith %}
      {% block body %}{% endblock %}
    </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/offline-js/0.7.17/offline.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js"></script>

  </body>


=======
    {% endif %}
  {% endwith %}
  {% block body %}{% endblock %}
  <!-- Javascript frameworks -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.4.8/socket.io.min.js"></script>

  <!-- App-specific JS -->
  {{  macros.js_asset('common.js') }}
</body>
>>>>>>> Move scripts to body for faster page load
</html>
