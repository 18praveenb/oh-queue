{% extends "default.html" %}
{% from "macros.html" import render_ticket_row with context %}
{% block header %}
{% if not current_user.is_staff %}
<div class="jumbotron blue">
  <div class="container">
    <section class="page-header">
      <div class="row">
        <div class="col-md-7 col-lg-8">
          <h1>Hello, {{ current_user.name.split()[0] }}</h1>
          <p>Signed in as {{ current_user.email }}</p>
        </div>
        <div class="col-md-5 col-lg-4">
          <div class="request-form">
            {% if my_ticket %}
            <a class="btn btn-block btn-jumbo btn-outline" href="{{ url_for('ticket', ticket_id=my_ticket.id) }}">My Request</a>
            {% else %}
            <form action="/create/" method="POST">
              <div class="form-group form-group-lg">
                <div class="input-group">
                  <select class="selectpicker form-control" id="assignment" name="assignment" title="Assignment" data-live-search="true" data-size="8" data-width="60%" data-style="btn-lg btn-default" required>
                    <option data-tokens="hog proj1 project 1">Hog</option>
                    <option data-tokens="maps proj2 project 2">Maps</option>
                    <option data-tokens="ants proj3 project 3">Ants</option>
                    <option data-tokens="scheme proj4 project 4">Scheme</option>
                    <option data-divider="true"></option>
                    <option data-tokens="hw1 homework 1">Homework 1</option>
                    <option data-tokens="hw2 homework 2">Homework 2</option>
                    <option data-tokens="hw3 homework 3">Homework 3</option>
                    <option data-tokens="hw4 homework 4">Homework 4</option>
                    <option data-tokens="hw5 homework 5">Homework 5</option>
                    <option data-tokens="hw6 homework 6">Homework 6</option>
                    <option data-tokens="hw7 homework 7">Homework 7</option>
                    <option data-tokens="hw8 homework 8">Homework 8</option>
                    <option data-tokens="hw9 homework 9">Homework 9</option>
                    <option data-tokens="hw10 homework 10">Homework 10</option>
                    <option data-divider="true"></option>
                    <option data-tokens="lab1 lab 1">Lab 1</option>
                    <option data-tokens="lab2 lab 2">Lab 2</option>
                    <option data-tokens="lab3 lab 3">Lab 3</option>
                    <option data-tokens="lab4 lab 4">Lab 4</option>
                    <option data-tokens="lab5 lab 5">Lab 5</option>
                    <option data-tokens="lab6 lab 6">Lab 6</option>
                    <option data-tokens="lab7 lab 7">Lab 7</option>
                    <option data-tokens="lab8 lab 8">Lab 8</option>
                    <option data-tokens="lab9 lab 9">Lab 9</option>
                    <option data-tokens="lab10 lab 10">Lab 10</option>
                    <option data-tokens="lab11 lab 11">Lab 11</option>
                    <option data-tokens="lab12 lab 12">Lab 12</option>
                    <option data-tokens="lab13 lab 13">Lab 13</option>
                  </select>
                  <input style="width: 40%;" class="form-control" type="number" name="question" id="question" title="Question" placeholder="Question" min="0" step="1" required>
                </div>
              </div>
              <div class="form-group form-group-lg">
                <div class="input-group">
                  <select class="selectpicker form-control" id="location" name="location" title="Location" data-width="100%" data-style="btn-lg btn-default" required>
                    <option>109 Morgan</option>
                    <option>237 Cory</option>
                    <option>241 Cory</option>
                    <option>247 Cory</option>
                  </select>
                  <span class="input-group-btn" style="width: 40%;">
                    <button class="btn btn-lg btn-default" style="width: 100%;" type="submit" value="Submit">Request<span class="hidden-xs"> Help</span></button>
                  </span>
                </div>
              </div>
            </form>
            {% endif %}
          </div>
        </div>
      </div>
    </section>
  </div>
</div>
{% endif %}
{% endblock %}
{% block body %}
<div class="row">
    <div class="col-xs-3 col-sm-2">Name</div>
    <div class="hidden-xs col-sm-2 ">Queue Time</div>
    <div class="col-xs-3 col-sm-2">Location</div>
    <div class="col-xs-3 col-sm-2">Assignment</div>
    <div class="hidden-xs col-sm-2">Question</div>
    <div class="col-xs-3 col-sm-2">Status</div>
</div>
<div class="row">
    {% for ticket in tickets %}
    {{ render_ticket_row(ticket) }}
    {% endfor %}
</div>
<script src="{{ url_for('static', filename='js/index.js') }}"></script>
<script>
var has_open_ticket = {{ 'true' if my_ticket else 'false' }};
</script>
{% endblock %}
